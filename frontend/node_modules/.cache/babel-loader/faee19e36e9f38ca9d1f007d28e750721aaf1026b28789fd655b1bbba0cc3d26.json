{"ast":null,"code":"import { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'AOIManagement',\n  data() {\n    return {\n      showCreateModal: false,\n      editingAOI: null,\n      aoiForm: {\n        name: '',\n        description: '',\n        monitoring_frequency: 'weekly',\n        change_threshold: 15,\n        alert_enabled: true\n      }\n    };\n  },\n  computed: {\n    ...mapGetters('aoi', ['aois', 'isLoading', 'error'])\n  },\n  methods: {\n    ...mapActions('aoi', ['fetchAOIs', 'createAOI', 'updateAOI', 'deleteAOI']),\n    async refreshData() {\n      try {\n        await this.fetchAOIs();\n      } catch (error) {\n        console.error('Error fetching AOIs:', error);\n      }\n    },\n    editAOI(aoi) {\n      this.editingAOI = aoi;\n      this.aoiForm = {\n        ...aoi\n      };\n      this.showCreateModal = true;\n    },\n    async saveAOI() {\n      try {\n        if (this.editingAOI) {\n          await this.updateAOI({\n            ...this.aoiForm,\n            id: this.editingAOI.id\n          });\n        } else {\n          await this.createAOI(this.aoiForm);\n        }\n        this.closeModal();\n        await this.refreshData();\n      } catch (error) {\n        console.error('Error saving AOI:', error);\n      }\n    },\n    async deleteAOI(aoiId) {\n      if (confirm('Are you sure you want to delete this AOI?')) {\n        try {\n          await this.deleteAOI(aoiId);\n          await this.refreshData();\n        } catch (error) {\n          console.error('Error deleting AOI:', error);\n        }\n      }\n    },\n    closeModal() {\n      this.showCreateModal = false;\n      this.editingAOI = null;\n      this.aoiForm = {\n        name: '',\n        description: '',\n        monitoring_frequency: 'weekly',\n        change_threshold: 15,\n        alert_enabled: true\n      };\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString();\n    }\n  },\n  async mounted() {\n    await this.refreshData();\n  }\n};","map":{"version":3,"names":["mapGetters","mapActions","name","data","showCreateModal","editingAOI","aoiForm","description","monitoring_frequency","change_threshold","alert_enabled","computed","methods","refreshData","fetchAOIs","error","console","editAOI","aoi","saveAOI","updateAOI","id","createAOI","closeModal","deleteAOI","aoiId","confirm","formatDate","dateString","Date","toLocaleDateString","mounted"],"sources":["C:\\Users\\ASUS\\OneDrive\\ÁîªÂÉè\\„Éâ„Ç≠„É•„É°„É≥„Éà\\Desktop\\cursor demo\\frontend\\src\\views\\AOIManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"aoi-management\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <h1 class=\"mb-4\">üó∫Ô∏è AOI Management</h1>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- AOI List -->\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n            <h5 class=\"mb-0\">Areas of Interest</h5>\r\n            <button class=\"btn btn-primary\" @click=\"showCreateModal = true\">\r\n              <i class=\"bi bi-plus-circle\"></i> Create New AOI\r\n            </button>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"isLoading\" class=\"text-center\">\r\n              <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"aois.length === 0\" class=\"text-center text-muted\">\r\n              <p>No AOIs created yet. Create your first AOI to get started.</p>\r\n            </div>\r\n            <div v-else>\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Area (ha)</th>\r\n                      <th>Status</th>\r\n                      <th>Monitoring</th>\r\n                      <th>Created</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"aoi in aois\" :key=\"aoi.id\">\r\n                      <td>{{ aoi.name }}</td>\r\n                      <td>{{ aoi.area_hectares.toFixed(2) }}</td>\r\n                      <td>\r\n                        <span class=\"badge\" :class=\"aoi.is_active ? 'bg-success' : 'bg-secondary'\">\r\n                          {{ aoi.is_active ? 'Active' : 'Inactive' }}\r\n                        </span>\r\n                      </td>\r\n                      <td>{{ aoi.monitoring_frequency }}</td>\r\n                      <td>{{ formatDate(aoi.created_at) }}</td>\r\n                      <td>\r\n                        <button class=\"btn btn-sm btn-outline-primary me-1\" @click=\"editAOI(aoi)\">\r\n                          <i class=\"bi bi-pencil\"></i>\r\n                        </button>\r\n                        <button class=\"btn btn-sm btn-outline-danger\" @click=\"deleteAOI(aoi.id)\">\r\n                          <i class=\"bi bi-trash\"></i>\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Create/Edit Modal -->\r\n    <div class=\"modal fade\" :class=\"{ show: showCreateModal }\" :style=\"{ display: showCreateModal ? 'block' : 'none' }\" tabindex=\"-1\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">{{ editingAOI ? 'Edit AOI' : 'Create New AOI' }}</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"saveAOI\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Name *</label>\r\n                  <input v-model=\"aoiForm.name\" type=\"text\" class=\"form-control\" required>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Description</label>\r\n                  <textarea v-model=\"aoiForm.description\" class=\"form-control\" rows=\"3\"></textarea>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Monitoring Frequency</label>\r\n                  <select v-model=\"aoiForm.monitoring_frequency\" class=\"form-select\">\r\n                    <option value=\"daily\">Daily</option>\r\n                    <option value=\"weekly\">Weekly</option>\r\n                    <option value=\"monthly\">Monthly</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Change Threshold (%)</label>\r\n                  <input v-model=\"aoiForm.change_threshold\" type=\"number\" class=\"form-control\" min=\"0\" max=\"100\" step=\"0.1\">\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Geometry</label>\r\n                <div class=\"border rounded p-3 bg-light\">\r\n                  <p class=\"text-muted mb-2\">Draw your AOI on the map below:</p>\r\n                  <div id=\"map\" style=\"height: 300px; width: 100%;\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"form-check mb-3\">\r\n                <input v-model=\"aoiForm.alert_enabled\" class=\"form-check-input\" type=\"checkbox\" id=\"alertEnabled\">\r\n                <label class=\"form-check-label\" for=\"alertEnabled\">\r\n                  Enable alerts for this AOI\r\n                </label>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Cancel</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"saveAOI\">\r\n              {{ editingAOI ? 'Update' : 'Create' }} AOI\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Modal backdrop -->\r\n    <div v-if=\"showCreateModal\" class=\"modal-backdrop fade show\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'AOIManagement',\r\n  data() {\r\n    return {\r\n      showCreateModal: false,\r\n      editingAOI: null,\r\n      aoiForm: {\r\n        name: '',\r\n        description: '',\r\n        monitoring_frequency: 'weekly',\r\n        change_threshold: 15,\r\n        alert_enabled: true\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('aoi', ['aois', 'isLoading', 'error'])\r\n  },\r\n  methods: {\r\n    ...mapActions('aoi', ['fetchAOIs', 'createAOI', 'updateAOI', 'deleteAOI']),\r\n    \r\n    async refreshData() {\r\n      try {\r\n        await this.fetchAOIs()\r\n      } catch (error) {\r\n        console.error('Error fetching AOIs:', error)\r\n      }\r\n    },\r\n    \r\n    editAOI(aoi) {\r\n      this.editingAOI = aoi\r\n      this.aoiForm = { ...aoi }\r\n      this.showCreateModal = true\r\n    },\r\n    \r\n    async saveAOI() {\r\n      try {\r\n        if (this.editingAOI) {\r\n          await this.updateAOI({ ...this.aoiForm, id: this.editingAOI.id })\r\n        } else {\r\n          await this.createAOI(this.aoiForm)\r\n        }\r\n        this.closeModal()\r\n        await this.refreshData()\r\n      } catch (error) {\r\n        console.error('Error saving AOI:', error)\r\n      }\r\n    },\r\n    \r\n    async deleteAOI(aoiId) {\r\n      if (confirm('Are you sure you want to delete this AOI?')) {\r\n        try {\r\n          await this.deleteAOI(aoiId)\r\n          await this.refreshData()\r\n        } catch (error) {\r\n          console.error('Error deleting AOI:', error)\r\n        }\r\n      }\r\n    },\r\n    \r\n    closeModal() {\r\n      this.showCreateModal = false\r\n      this.editingAOI = null\r\n      this.aoiForm = {\r\n        name: '',\r\n        description: '',\r\n        monitoring_frequency: 'weekly',\r\n        change_threshold: 15,\r\n        alert_enabled: true\r\n      }\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      return new Date(dateString).toLocaleDateString()\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.refreshData()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.aoi-management {\r\n  padding: 20px;\r\n}\r\n\r\n.modal.show {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n#map {\r\n  border: 1px solid #dee2e6;\r\n}\r\n</style>\r\n"],"mappings":"AAyIA,SAASA,UAAU,EAAEC,UAAS,QAAS,MAAK;AAE5C,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,eAAe,EAAE,KAAK;MACtBC,UAAU,EAAE,IAAI;MAChBC,OAAO,EAAE;QACPJ,IAAI,EAAE,EAAE;QACRK,WAAW,EAAE,EAAE;QACfC,oBAAoB,EAAE,QAAQ;QAC9BC,gBAAgB,EAAE,EAAE;QACpBC,aAAa,EAAE;MACjB;IACF;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGX,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,EAAE,WAAW,EAAE,OAAO,CAAC;EACrD,CAAC;EACDY,OAAO,EAAE;IACP,GAAGX,UAAU,CAAC,KAAK,EAAE,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;IAE1E,MAAMY,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAM,IAAI,CAACC,SAAS,CAAC;MACvB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK;MAC7C;IACF,CAAC;IAEDE,OAAOA,CAACC,GAAG,EAAE;MACX,IAAI,CAACb,UAAS,GAAIa,GAAE;MACpB,IAAI,CAACZ,OAAM,GAAI;QAAE,GAAGY;MAAI;MACxB,IAAI,CAACd,eAAc,GAAI,IAAG;IAC5B,CAAC;IAED,MAAMe,OAAOA,CAAA,EAAG;MACd,IAAI;QACF,IAAI,IAAI,CAACd,UAAU,EAAE;UACnB,MAAM,IAAI,CAACe,SAAS,CAAC;YAAE,GAAG,IAAI,CAACd,OAAO;YAAEe,EAAE,EAAE,IAAI,CAAChB,UAAU,CAACgB;UAAG,CAAC;QAClE,OAAO;UACL,MAAM,IAAI,CAACC,SAAS,CAAC,IAAI,CAAChB,OAAO;QACnC;QACA,IAAI,CAACiB,UAAU,CAAC;QAChB,MAAM,IAAI,CAACV,WAAW,CAAC;MACzB,EAAE,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK;MAC1C;IACF,CAAC;IAED,MAAMS,SAASA,CAACC,KAAK,EAAE;MACrB,IAAIC,OAAO,CAAC,2CAA2C,CAAC,EAAE;QACxD,IAAI;UACF,MAAM,IAAI,CAACF,SAAS,CAACC,KAAK;UAC1B,MAAM,IAAI,CAACZ,WAAW,CAAC;QACzB,EAAE,OAAOE,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK;QAC5C;MACF;IACF,CAAC;IAEDQ,UAAUA,CAAA,EAAG;MACX,IAAI,CAACnB,eAAc,GAAI,KAAI;MAC3B,IAAI,CAACC,UAAS,GAAI,IAAG;MACrB,IAAI,CAACC,OAAM,GAAI;QACbJ,IAAI,EAAE,EAAE;QACRK,WAAW,EAAE,EAAE;QACfC,oBAAoB,EAAE,QAAQ;QAC9BC,gBAAgB,EAAE,EAAE;QACpBC,aAAa,EAAE;MACjB;IACF,CAAC;IAEDiB,UAAUA,CAACC,UAAU,EAAE;MACrB,OAAO,IAAIC,IAAI,CAACD,UAAU,CAAC,CAACE,kBAAkB,CAAC;IACjD;EACF,CAAC;EAED,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAAClB,WAAW,CAAC;EACzB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}