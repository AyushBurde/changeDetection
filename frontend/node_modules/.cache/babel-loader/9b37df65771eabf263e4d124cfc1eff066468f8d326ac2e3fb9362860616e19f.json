{"ast":null,"code":"import { mapGetters, mapActions } from 'vuex';\nexport default {\n  name: 'ChangeDetection',\n  data() {\n    return {\n      isStarting: false,\n      detectionForm: {\n        aoi_id: '',\n        start_date: '',\n        end_date: '',\n        algorithm: 'spectral',\n        sensitivity: 'medium'\n      }\n    };\n  },\n  computed: {\n    ...mapGetters('detection', ['activeJobs', 'completedJobs', 'isLoading']),\n    ...mapGetters('aoi', ['aois'])\n  },\n  methods: {\n    ...mapActions('detection', ['createDetectionJob', 'fetchDetectionJobs']),\n    ...mapActions('aoi', ['fetchAOIs']),\n    async startDetection() {\n      this.isStarting = true;\n      try {\n        await this.createDetectionJob(this.detectionForm);\n        this.resetForm();\n        await this.refreshData();\n      } catch (error) {\n        console.error('Error starting detection:', error);\n      } finally {\n        this.isStarting = false;\n      }\n    },\n    resetForm() {\n      this.detectionForm = {\n        aoi_id: '',\n        start_date: '',\n        end_date: '',\n        algorithm: 'spectral',\n        sensitivity: 'medium'\n      };\n    },\n    async refreshData() {\n      try {\n        await Promise.all([this.fetchDetectionJobs(), this.fetchAOIs()]);\n      } catch (error) {\n        console.error('Error refreshing data:', error);\n      }\n    },\n    viewJobDetails(job) {\n      // TODO: Implement job details view\n      console.log('View job details:', job);\n    },\n    viewResults(job) {\n      // TODO: Implement results view\n      console.log('View results:', job);\n    },\n    exportResults(job) {\n      // TODO: Implement export functionality\n      console.log('Export results:', job);\n    },\n    formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString();\n    }\n  },\n  async mounted() {\n    await this.refreshData();\n  }\n};","map":{"version":3,"names":["mapGetters","mapActions","name","data","isStarting","detectionForm","aoi_id","start_date","end_date","algorithm","sensitivity","computed","methods","startDetection","createDetectionJob","resetForm","refreshData","error","console","Promise","all","fetchDetectionJobs","fetchAOIs","viewJobDetails","job","log","viewResults","exportResults","formatDate","dateString","Date","toLocaleDateString","mounted"],"sources":["C:\\Users\\ASUS\\OneDrive\\ÁîªÂÉè\\„Éâ„Ç≠„É•„É°„É≥„Éà\\Desktop\\cursor demo\\frontend\\src\\views\\ChangeDetection.vue"],"sourcesContent":["<template>\r\n  <div class=\"change-detection\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <h1 class=\"mb-4\">üîç Change Detection</h1>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- New Detection Job -->\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"mb-0\">Start New Change Detection</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <form @submit.prevent=\"startDetection\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label class=\"form-label\">AOI *</label>\r\n                  <select v-model=\"detectionForm.aoi_id\" class=\"form-select\" required>\r\n                    <option value=\"\">Select an AOI</option>\r\n                    <option v-for=\"aoi in aois\" :key=\"aoi.id\" :value=\"aoi.id\">\r\n                      {{ aoi.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label class=\"form-label\">Start Date *</label>\r\n                  <input v-model=\"detectionForm.start_date\" type=\"date\" class=\"form-control\" required>\r\n                </div>\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label class=\"form-label\">End Date *</label>\r\n                  <input v-model=\"detectionForm.end_date\" type=\"date\" class=\"form-control\" required>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Detection Algorithm</label>\r\n                  <select v-model=\"detectionForm.algorithm\" class=\"form-select\">\r\n                    <option value=\"spectral\">Spectral Change Detection</option>\r\n                    <option value=\"ndvi\">NDVI Change Analysis</option>\r\n                    <option value=\"machine_learning\">Machine Learning</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label class=\"form-label\">Sensitivity</label>\r\n                  <select v-model=\"detectionForm.sensitivity\" class=\"form-select\">\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \r\n              <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isStarting\">\r\n                <span v-if=\"isStarting\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                Start Detection\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Active Jobs -->\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"mb-0\">Active Detection Jobs</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"activeJobs.length === 0\" class=\"text-center text-muted\">\r\n              <p>No active detection jobs</p>\r\n            </div>\r\n            <div v-else>\r\n              <div class=\"row\">\r\n                <div v-for=\"job in activeJobs\" :key=\"job.id\" class=\"col-md-6 mb-3\">\r\n                  <div class=\"card border-primary\">\r\n                    <div class=\"card-body\">\r\n                      <h6 class=\"card-title\">{{ job.aoi_name }}</h6>\r\n                      <p class=\"card-text\">\r\n                        <small class=\"text-muted\">\r\n                          Started: {{ formatDate(job.created_at) }}<br>\r\n                          Progress: {{ job.progress || 0 }}%\r\n                        </small>\r\n                      </p>\r\n                      <div class=\"progress mb-2\">\r\n                        <div class=\"progress-bar\" :style=\"{ width: (job.progress || 0) + '%' }\"></div>\r\n                      </div>\r\n                      <button class=\"btn btn-sm btn-outline-primary\" @click=\"viewJobDetails(job)\">\r\n                        View Details\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Completed Jobs -->\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"mb-0\">Completed Detection Jobs</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"completedJobs.length === 0\" class=\"text-center text-muted\">\r\n              <p>No completed detection jobs</p>\r\n            </div>\r\n            <div v-else>\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>AOI</th>\r\n                      <th>Algorithm</th>\r\n                      <th>Changes Detected</th>\r\n                      <th>Confidence</th>\r\n                      <th>Completed</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"job in completedJobs\" :key=\"job.id\">\r\n                      <td>{{ job.aoi_name }}</td>\r\n                      <td>{{ job.algorithm }}</td>\r\n                      <td>\r\n                        <span class=\"badge bg-success\">{{ job.changes_detected || 0 }}</span>\r\n                      </td>\r\n                      <td>{{ (job.confidence || 0).toFixed(1) }}%</td>\r\n                      <td>{{ formatDate(job.completed_at) }}</td>\r\n                      <td>\r\n                        <button class=\"btn btn-sm btn-outline-primary me-1\" @click=\"viewResults(job)\">\r\n                          <i class=\"bi bi-eye\"></i> Results\r\n                        </button>\r\n                        <button class=\"btn btn-sm btn-outline-success\" @click=\"exportResults(job)\">\r\n                          <i class=\"bi bi-download\"></i> Export\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'ChangeDetection',\r\n  data() {\r\n    return {\r\n      isStarting: false,\r\n      detectionForm: {\r\n        aoi_id: '',\r\n        start_date: '',\r\n        end_date: '',\r\n        algorithm: 'spectral',\r\n        sensitivity: 'medium'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('detection', ['activeJobs', 'completedJobs', 'isLoading']),\r\n    ...mapGetters('aoi', ['aois'])\r\n  },\r\n  methods: {\r\n    ...mapActions('detection', ['createDetectionJob', 'fetchDetectionJobs']),\r\n    ...mapActions('aoi', ['fetchAOIs']),\r\n    \r\n    async startDetection() {\r\n      this.isStarting = true\r\n      try {\r\n        await this.createDetectionJob(this.detectionForm)\r\n        this.resetForm()\r\n        await this.refreshData()\r\n      } catch (error) {\r\n        console.error('Error starting detection:', error)\r\n      } finally {\r\n        this.isStarting = false\r\n      }\r\n    },\r\n    \r\n    resetForm() {\r\n      this.detectionForm = {\r\n        aoi_id: '',\r\n        start_date: '',\r\n        end_date: '',\r\n        algorithm: 'spectral',\r\n        sensitivity: 'medium'\r\n      }\r\n    },\r\n    \r\n    async refreshData() {\r\n      try {\r\n        await Promise.all([\r\n          this.fetchDetectionJobs(),\r\n          this.fetchAOIs()\r\n        ])\r\n      } catch (error) {\r\n        console.error('Error refreshing data:', error)\r\n      }\r\n    },\r\n    \r\n    viewJobDetails(job) {\r\n      // TODO: Implement job details view\r\n      console.log('View job details:', job)\r\n    },\r\n    \r\n    viewResults(job) {\r\n      // TODO: Implement results view\r\n      console.log('View results:', job)\r\n    },\r\n    \r\n    exportResults(job) {\r\n      // TODO: Implement export functionality\r\n      console.log('Export results:', job)\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      return new Date(dateString).toLocaleDateString()\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.refreshData()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.change-detection {\r\n  padding: 20px;\r\n}\r\n\r\n.progress {\r\n  height: 8px;\r\n}\r\n\r\n.progress-bar {\r\n  background-color: #007bff;\r\n}\r\n</style>\r\n"],"mappings":"AA+JA,SAASA,UAAU,EAAEC,UAAS,QAAS,MAAK;AAE5C,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,KAAK;MACjBC,aAAa,EAAE;QACbC,MAAM,EAAE,EAAE;QACVC,UAAU,EAAE,EAAE;QACdC,QAAQ,EAAE,EAAE;QACZC,SAAS,EAAE,UAAU;QACrBC,WAAW,EAAE;MACf;IACF;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGX,UAAU,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,eAAe,EAAE,WAAW,CAAC,CAAC;IACxE,GAAGA,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC;EAC/B,CAAC;EACDY,OAAO,EAAE;IACP,GAAGX,UAAU,CAAC,WAAW,EAAE,CAAC,oBAAoB,EAAE,oBAAoB,CAAC,CAAC;IACxE,GAAGA,UAAU,CAAC,KAAK,EAAE,CAAC,WAAW,CAAC,CAAC;IAEnC,MAAMY,cAAcA,CAAA,EAAG;MACrB,IAAI,CAACT,UAAS,GAAI,IAAG;MACrB,IAAI;QACF,MAAM,IAAI,CAACU,kBAAkB,CAAC,IAAI,CAACT,aAAa;QAChD,IAAI,CAACU,SAAS,CAAC;QACf,MAAM,IAAI,CAACC,WAAW,CAAC;MACzB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK;MAClD,UAAU;QACR,IAAI,CAACb,UAAS,GAAI,KAAI;MACxB;IACF,CAAC;IAEDW,SAASA,CAAA,EAAG;MACV,IAAI,CAACV,aAAY,GAAI;QACnBC,MAAM,EAAE,EAAE;QACVC,UAAU,EAAE,EAAE;QACdC,QAAQ,EAAE,EAAE;QACZC,SAAS,EAAE,UAAU;QACrBC,WAAW,EAAE;MACf;IACF,CAAC;IAED,MAAMM,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMG,OAAO,CAACC,GAAG,CAAC,CAChB,IAAI,CAACC,kBAAkB,CAAC,CAAC,EACzB,IAAI,CAACC,SAAS,CAAC,EAChB;MACH,EAAE,OAAOL,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK;MAC/C;IACF,CAAC;IAEDM,cAAcA,CAACC,GAAG,EAAE;MAClB;MACAN,OAAO,CAACO,GAAG,CAAC,mBAAmB,EAAED,GAAG;IACtC,CAAC;IAEDE,WAAWA,CAACF,GAAG,EAAE;MACf;MACAN,OAAO,CAACO,GAAG,CAAC,eAAe,EAAED,GAAG;IAClC,CAAC;IAEDG,aAAaA,CAACH,GAAG,EAAE;MACjB;MACAN,OAAO,CAACO,GAAG,CAAC,iBAAiB,EAAED,GAAG;IACpC,CAAC;IAEDI,UAAUA,CAACC,UAAU,EAAE;MACrB,OAAO,IAAIC,IAAI,CAACD,UAAU,CAAC,CAACE,kBAAkB,CAAC;IACjD;EACF,CAAC;EAED,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAAChB,WAAW,CAAC;EACzB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}